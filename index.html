{{ define "index" }}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Datastar fat morph with event steaming</title>
    <script
      type="module"
      src="https://cdn.jsdelivr.net/gh/starfederation/datastar@v1.0.0-RC.7/bundles/datastar.js"
    ></script>
  </head>
  <body data-init="@get('/stream')">
    <p>Client ID: {{ .ClientID }}</p>
    {{ block "main" . }}
    <main id="main">
      <h1>Datastar fat morph</h1>
      <p>Server time: {{ .ServerAt }}</p>
      <p>Counter: {{ .Counter }}</p>
      <button data-on:click="@post('/increment')">Increment</button>
      <button data-on:click="@post('/decrement')">Decrement</button>
      <button data-on:click="@post('/reset')">Reset</button>
      <h2>Counter actions</h2>
      <ul id="inc-list">
        {{ range .Actions }}
        <li>{{ .Action }} by {{ .ClientID }} at {{ .At }}</li>
        {{ end }}
      </ul>
    </main>
    {{ end }}
  </body>
</html>
{{ end }}
